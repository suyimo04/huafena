import{i as y}from"./axios-DYop8cuN.js";import{d as w,y as L,c as b,a as t,C as h,t as e,b as i,w as f,v as D,k as R,j as d,r,D as N,o as c,F as P,x as S,f as k,_ as B}from"./index-Dmpy0hQc.js";function O(){return y.get("/dashboard/stats")}function H(u){const a={};return u&&(a.type=u),y.get("/dashboard/audit-logs",{params:a})}const M={class:"p-6"},W={class:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6"},Y={class:"stat-card"},j={class:"stat-value"},F={class:"stat-card"},G={class:"stat-value"},U={class:"stat-card"},q={class:"stat-value"},z={class:"stat-card"},J={class:"stat-value"},K={class:"stat-card"},Q={class:"stat-value"},X={class:"stat-card"},Z={class:"stat-value"},$={class:"stat-card"},tt={class:"stat-value"},st={class:"stat-card"},at={class:"stat-value"},et={class:"stat-card"},ot={class:"stat-value"},lt={class:"flex items-center mb-3"},it=w({__name:"DashboardPage",setup(u){const a=R({totalMembers:0,adminCount:0,leaderCount:0,viceLeaderCount:0,memberCount:0,internCount:0,applicantCount:0,totalActivities:0,totalPointsRecords:0}),v=d(!1),_=d(!1),p=d([]),m=d(""),A=["SALARY_SAVE","ROLE_CHANGE","APPLICATION_REVIEW","INTERVIEW_REVIEW","ACTIVITY_CREATE","ACTIVITY_ARCHIVE","POINTS_CHANGE"];function I(o){return o?o.replace("T"," ").substring(0,19):""}async function E(){v.value=!0;try{const o=await O();Object.assign(a,o.data)}catch{}finally{v.value=!1}}async function g(){_.value=!0;try{const o=await H(m.value||void 0);p.value=o.data??[]}catch{p.value=[]}finally{_.value=!1}}return L(()=>{E(),g()}),(o,s)=>{const T=r("el-option"),x=r("el-select"),n=r("el-table-column"),V=r("el-table"),C=N("loading");return c(),b("div",M,[s[10]||(s[10]=t("h2",{class:"text-xl font-semibold text-gray-800 mb-4"},"数据看板",-1)),h((c(),b("div",W,[t("div",Y,[s[1]||(s[1]=t("div",{class:"stat-label"},"成员总数",-1)),t("div",j,e(a.totalMembers),1)]),t("div",F,[s[2]||(s[2]=t("div",{class:"stat-label"},"管理员",-1)),t("div",G,e(a.adminCount),1)]),t("div",U,[s[3]||(s[3]=t("div",{class:"stat-label"},"组长",-1)),t("div",q,e(a.leaderCount),1)]),t("div",z,[s[4]||(s[4]=t("div",{class:"stat-label"},"副组长",-1)),t("div",J,e(a.viceLeaderCount),1)]),t("div",K,[s[5]||(s[5]=t("div",{class:"stat-label"},"正式成员",-1)),t("div",Q,e(a.memberCount),1)]),t("div",X,[s[6]||(s[6]=t("div",{class:"stat-label"},"实习成员",-1)),t("div",Z,e(a.internCount),1)]),t("div",$,[s[7]||(s[7]=t("div",{class:"stat-label"},"申请者",-1)),t("div",tt,e(a.applicantCount),1)]),t("div",st,[s[8]||(s[8]=t("div",{class:"stat-label"},"活动总数",-1)),t("div",at,e(a.totalActivities),1)]),t("div",et,[s[9]||(s[9]=t("div",{class:"stat-label"},"积分记录",-1)),t("div",ot,e(a.totalPointsRecords),1)])])),[[C,v.value]]),s[11]||(s[11]=t("h3",{class:"text-lg font-semibold text-gray-700 mb-3"},"审计日志",-1)),t("div",lt,[i(x,{modelValue:m.value,"onUpdate:modelValue":s[0]||(s[0]=l=>m.value=l),placeholder:"按操作类型筛选",clearable:"",style:{width:"220px"},onChange:g},{default:f(()=>[(c(),b(P,null,S(A,l=>i(T,{key:l,label:l,value:l},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),h((c(),D(V,{data:p.value,stripe:"",class:"w-full"},{default:f(()=>[i(n,{prop:"operatorId",label:"操作人ID",width:"140"}),i(n,{prop:"operationType",label:"操作类型",width:"160"}),i(n,{label:"操作时间",width:"180"},{default:f(({row:l})=>[k(e(I(l.operationTime)),1)]),_:1}),i(n,{prop:"operationDetail",label:"操作详情","min-width":"240"})]),_:1},8,["data"])),[[C,_.value]])])}}}),rt=B(it,[["__scopeId","data-v-39ca1ce0"]]);export{rt as default};
